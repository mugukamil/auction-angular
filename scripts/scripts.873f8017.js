"use strict";angular.module("auction",["ngRoute","restangular"]).config(["$routeProvider",function(a){var b=function(a){return a+" | Auction"};a.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"ctrl",title:b("Home")}).when("/search",{templateUrl:"views/search.html",controller:"SearchCtrl",controllerAs:"ctrl",title:b("Search")}).when("/product/:productId",{templateUrl:"views/product.html",controller:"ProductCtrl",controllerAs:"ctrl",title:b("Product Details"),resolve:{product:["$route","ProductService",function(a,b){var c=parseInt(a.current.params.productId);return b.getProductById(c)}]}}).otherwise({redirectTo:"/"})}]).config(["RestangularProvider",function(a){a.setBaseUrl("https://private-5c1fc8-romanivanov1.apiary-mock.com")}]).run(["$rootScope",function(a){a.$on("$routeChangeSuccess",function(b,c){a.pageTitle=c.title})}]);var HomeCtrl=function(a){var b=this;b.products=[],a.getProducts().then(function(a){b.products=a})};HomeCtrl.$inject=["ProductService"],angular.module("auction").controller("HomeCtrl",HomeCtrl);var ProductCtrl=function(a){this.product=a};ProductCtrl.$inject=["product"],angular.module("auction").controller("ProductCtrl",ProductCtrl);var SearchCtrl=function(a){var b=this;b.products=[],a.find().then(function(a){b.products=a})};SearchCtrl.$inject=["ProductService"],angular.module("auction").controller("SearchCtrl",SearchCtrl);var navbarDirectiveFactory=function(){return{restrict:"E",templateUrl:"views/partial/navbar-directive.html"}};angular.module("auction").directive("auctionNavbar",navbarDirectiveFactory);var footerDirectiveFactory=function(){return{restrict:"E",templateUrl:"views/partial/footer-directive.html"}};angular.module("auction").directive("auctionFooter",footerDirectiveFactory);var searchFormDirective=function(){return{restrict:"E",templateUrl:"views/partial/SearchFormDirective.html"}};angular.module("auction").directive("auctionSearchForm",searchFormDirective);var datepickerDirectiveFactory=function(){return{restrict:"A",link:function(a,b){b.datepicker()}}};angular.module("auction").directive("auctionDatepicker",datepickerDirectiveFactory);var priceRangeDirectiveFactory=function(){return{scope:{minPrice:"@",maxPrice:"@",lowPrice:"=",highPrice:"="},restrict:"E",templateUrl:"views/partial/pricerange-directive.html",link:function(a,b){var c=angular.element(b).find("input[type=text]"),d=a.minPrice||0,e=a.maxPrice||500;a.lowPrice=a.lowPrice||d,a.maxPrice=a.maxPrice||e,c.slider({min:d,max:e,value:[a.lowPrice,a.highPrice]}),c.on("slideStop",function(b){a.$apply(function(){a.lowPrice!==b.value[0]&&(a.lowPrice=b.value[0]),a.highPrice!==b.value[1]&&(a.highPrice=b.value[1])})});var f=function(){return c.slider("getValue")},g=function(a,b){c.slider("setValue",[a,b])};a.$watch("lowPrice",function(a){g(a||d,f()[1])}),a.$watch("highPrice",function(a){g(f()[0],a||e)})}}};angular.module("auction").directive("auctionPriceRange",priceRangeDirectiveFactory);var ProductService=function(a){this.Restangular=a};ProductService.prototype={getProducts:function(){return this.Restangular.all("products").getList()},find:function(a){return this.Restangular.all("products").getList(a)},getProductById:function(a){return this.Restangular.one("products",a).get()}},ProductService.$inject=["Restangular"],angular.module("auction").service("ProductService",ProductService),angular.module("auction").run(["$templateCache",function(a){a.put("views/home.html",'<div> <div id="featured-product-carousel" class="carousel slide" data-pause="hover" data-wrap="true" data-interval="3000"> <ol class="carousel-indicators"> <li data-target="#featured-product-carousel" data-slide-to="0" class="active"></li> <li data-target="#featured-product-carousel" data-slide-to="1" class=""></li> <li data-target="#featured-product-carousel" data-slide-to="2" class=""></li> </ol> <div class="carousel-inner"> <div class="item active"> <img src="images/promo-product-1.jpg" alt="ABC Auction Deals" class="img-responsive center-block"> </div> <div class="item"> <img src="images/promo-product-2.jpg" alt="ABC Auction Deals" class="img-responsive center-block"> </div> <div class="item"> <img src="images/promo-product-3.jpg" alt="ABC Auction Deals" class="img-responsive center-block"> </div> </div> <!-- Controls --> <a class="left carousel-control" href="javascript:$(\'.carousel\').carousel(\'prev\');"> <span class="glyphicon glyphicon-chevron-left"></span> </a> <a class="right carousel-control" href="javascript:$(\'.carousel\').carousel(\'next\');"> <span class="glyphicon glyphicon-chevron-right"></span> </a> </div> <!-- Current App\'s Heading --> <h2 class="well well-sm" id="app-heading"> Featured Products </h2> <ul class="list-unstyled" id="items-list"> <li class="col-md-4" ng-repeat="product in ctrl.products"> <div class="row"> <div class="col-xs-4"> <a href="javascript:void(0)"><img ng-src="images/{{ product.thumb }}" alt="" class="img-responsive"></a> </div> <div class="product-description-holder col-xs-8"> <h2><a ng-href="#/product/{{ product.id }}">{{ product.title }}</a></h2> <p>{{ product.description }}</p> </div> </div> </li> </ul> </div>'),a.put("views/partial/SearchFormDirective.html",'<div> <div class="col-xs-12 col-md-4"> <div class="row form-group"> <div class="col-xs-12 col-sm-6 col-md-12"> <label class="control-label">Product</label> <input type="text" class="form-control" placeholder="Product title"> </div> <div class="col-xs-12 col-sm-6 col-md-12"> <label class="control-label">&nbsp;</label> <select class="form-control"> <option>Category</option> <option>Category 1</option> <option>Category 2</option> <option>Category 3</option> </select> </div> </div> </div> <div class="col-xs-12 col-md-8"> <div class="row"> <div class="col-xs-12 col-sm-6"> <auction-price-range low-price="ctrl.lowPrice" high-price="ctrl.highPrice"></auction-price-range> </div> <div class="col-xs-12 col-sm-6"> <div class="row"> <div class="col-xs-12"> <label class="control-label">Max Auction Close Day</label> <div class="input-group"> <!-- THE INPUT BELOW WILL BECOME A CALENDAR ONCE WE IMPLEMENT DATEPICKER DIRECTIVE --> <input auction-datepicker data-date-format="mm/dd/yyyy" class="form-control" value="08/17/2014"> <span class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span> </div> </div> <div class="col-xs-12"> <label class="control-label">&nbsp;</label><br> <form class="form-horizontal" role="form"> <div class="form-group"> <div class="col-xs-8"> <label class="control-label">Number of Bids</label> </div> <div class="col-xs-4"> <input type="number" class="form-control" value="3"> </div> </div> </form> </div> </div> </div> </div> </div> <div class="col-xs-12 col-md-4 col-md-offset-4"> <br> <button class="btn btn-default btn-block btn-primary">Find more</button> </div> </div>'),a.put("views/partial/footer-directive.html",'<footer class="text-center"> <a href="javascript:void(0)">Home</a> | <a href="javascript:void(0)">Search</a> | <a href="javascript:void(0)">About Us</a> | <a href="javascript:void(0)">Terms of Service</a> </footer>'),a.put("views/partial/navbar-directive.html",'<!-- Navbar --> <div class="navbar navbar-inverse"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <!-- STEP 6D --> <a class="navbar-brand" ng-href="#/">ABC Auction</a> </div> <div class="navbar-collapse collapse"> <form class="navbar-form navbar-left navbar-input-group" role="search"> <div class="form-group"> <input type="text" class="form-control" placeholder="Enter product name"> </div> <!-- STEP 6E --> <a ng-href="#/search" class="btn btn-default">Search</a> </form> <ul class="nav navbar-nav navbar-right"> <li><a href="javascript:void(0)"><span class="glyphicon glyphicon-question-sign"></span> Help</a></li> <li><a href="javascript:void(0)"><span class="glyphicon glyphicon-user"></span> Login</a></li> <li><a href="javascript:void(0)"><span class="glyphicon glyphicon-shopping-cart"></span> Shopping cart</a></li> </ul> </div> </div> </div> <!-- / Navbar -->'),a.put("views/partial/pricerange-directive.html",'<div class="row form-group"> <div class="col-xs-12"> <label class="control-label">Current Price</label><br> <div class="row"> <div class="col-xs-6"> <div class="input-group"> <span class="input-group-addon">$</span> <input type="number" class="form-control" ng-model="lowPrice" min="{{ minPrice }}" max="{{ highPrice }}"> </div> </div> <div class="col-xs-6"> <div class="input-group"> <span class="input-group-addon">$</span> <input type="number" class="form-control" ng-model="highPrice" min="{{ lowPrice }}" max="{{ maxPrice }}"> </div> </div> </div> </div> <div class="col-xs-12"> <label class="control-label">&nbsp;</label><br> <input type="text" class="form-control"> </div> </div>'),a.put("views/product.html",'<div class="row well"> <div class="col-xs-12 col-sm-10"> <ol class="breadcrumb"> <li><a href="javascript:void(0);">Home</a></li> <li>Category title</li> <li class="active">Item</li> </ol> </div> <div class="col-xs-12 col-sm-2"> <button ng-hide="ctrl.isSearchFormVisible" ng-click="ctrl.isSearchFormVisible = true" class="btn btn-default btn-block">Find more</button> <button ng-show="ctrl.isSearchFormVisible" ng-click="ctrl.isSearchFormVisible = false" class="close" aria-hidden="true">&times;</button> </div> <div ng-show="ctrl.isSearchFormVisible"> <auction-search-form ng-show="ctrl.isSearchFormVisible"></auction-search-form> </div> </div> <br> <div class="row"> <div class="col-sm-6 col-lg-5 text-center"> <img ng-src="images/{{ ctrl.product.thumb }}" alt="" class="img-responsive center-block"> <hr> <div class="row"> <div class="col-xs-4"> <a href="javascript:void(0);"><img ng-src="images/{{ ctrl.product.thumb }}" alt="" class="img-responsive center-block"></a> </div> <div class="col-xs-4"> <a href="javascript:void(0);"><img ng-src="images/{{ ctrl.product.thumb }}" alt="" class="img-responsive center-block"></a> </div> <div class="col-xs-4"> <a href="javascript:void(0);"><img ng-src="images/{{ ctrl.product.thumb }}" alt="" class="img-responsive center-block"></a> </div> </div> <hr> <h5> <span class="badge"><span class="glyphicon glyphicon-eye-open"></span></span> {{ ctrl.product.watchers }} Watchers <a href="javascript:void(0);" class="btn">Watch</a> </h5> </div> <div class="col-sm-6 col-lg-7"> <div> <h1>{{ ctrl.product.title }}</h1> <p>Seller: <b>starmotors</b> (135) 100% Positive feedback</p> </div> <div class="col-sm-12 col-md-9"> <h4><b>Current Price</b>: {{ ctrl.product.price | currency }} [5&nbsp;bids]</h4> <p> <b>Time left</b>: {{ ctrl.product.timeleft }}h </p> </div> <div class="col-sm-12 col-md-3"> <form class="form-horizontal" role="form"> <div class="form-group"> <input type="text" class="form-control" value=""> </div> <div class="form-group"> <button class="btn btn-default btn-block btn-primary">Place bid</button> </div> </form> </div> <div class="col-xs-12"><b>Item\'s description</b>: {{ ctrl.product.description }} </div> </div> </div>'),a.put("views/search.html",'<div> <div class="row well"> <auction-search-form></auction-search-form> </div> <h2 class="well well-sm" id="app-heading"> Search Results </h2> <ul class="list-unstyled" id="items-list"> <li class="col-md-4" ng-repeat="product in ctrl.products"> <div class="row"> <div class="col-xs-4"> <a href="javascript:void(0)"><img ng-src="images/{{product.thumb}}" alt="" class="img-responsive"></a> </div> <div class="product-description-holder col-xs-8"> <h2><a ng-href="#/product/{{ product.id }}">{{product.title}}</a></h2> <p>{{product.description}}</p> </div> </div> <br> <div class="row"> <div class="col-xs-4 text-center"> <span class="badge">{{product.timeleft}} hour left</span><br> <small>Today 15.00</small> </div> <div class="col-xs-4 text-center"> <span class="badge"> <span class="glyphicon glyphicon-eye-open"></span> {{product.watchers}} </span> <br> <small>Watchers</small> </div> <div class="col-xs-4 text-center"> <span class="badge">{{product.price | currency}}</span> <br> <small>Current price</small> </div> </div> <hr> </li> </ul> <div></div></div>')}]);